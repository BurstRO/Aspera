// This file is automatically generated by qtc from "block.qtpl".
// See https://github.com/valyala/quicktemplate for details.

//line block.qtpl:1
package template

//line block.qtpl:1
import "github.com/valyala/fastjson"

//line block.qtpl:2
import "encoding/base64"

//line block.qtpl:3
import "github.com/ac0v/aspera/pkg/encoding"

//line block.qtpl:4
import api "github.com/ac0v/aspera/pkg/api/p2p"

//line block.qtpl:5
import (
	qtio422016 "io"

	qt422016 "github.com/valyala/quicktemplate"
)

//line block.qtpl:5
var (
	_ = qtio422016.Copy
	_ = qt422016.AcquireByteBuffer
)

//line block.qtpl:5
func StreamUpgrade(qw422016 *qt422016.Writer, src *fastjson.Value) {
	//line block.qtpl:5
	qw422016.N().S(`
{
    "nextBlocks": [
        `)
	//line block.qtpl:9
	blocks := src.GetArray("nextBlocks")

	//line block.qtpl:10
	qw422016.N().S(`
        `)
	//line block.qtpl:11
	for blockId, block := range blocks {
		//line block.qtpl:11
		qw422016.N().S(`
            {
                "timestamp":           `)
		//line block.qtpl:13
		qw422016.N().D(block.GetInt("timestamp"))
		//line block.qtpl:13
		qw422016.N().S(`,
                "previousBlock":       `)
		//line block.qtpl:14
		qw422016.N().QZ(block.GetStringBytes("previousBlock"))
		//line block.qtpl:14
		qw422016.N().S(`,
                "blockATs":            `)
		//line block.qtpl:15
		qw422016.N().QZ(encoding.HexStringBytesToBase64Bytes(block.GetStringBytes("blockATs")))
		//line block.qtpl:15
		qw422016.N().S(`,
                "totalFee":            `)
		//line block.qtpl:16
		qw422016.N().D(block.GetInt("totalFeeNQT"))
		//line block.qtpl:16
		qw422016.N().S(`,
                "nonce":               `)
		//line block.qtpl:17
		qw422016.N().QZ(block.GetStringBytes("nonce"))
		//line block.qtpl:17
		qw422016.N().S(`,
                "version":             `)
		//line block.qtpl:18
		qw422016.N().D(block.GetInt("version"))
		//line block.qtpl:18
		qw422016.N().S(`,
                "blockSignature":      `)
		//line block.qtpl:19
		qw422016.N().QZ(encoding.HexStringBytesToBase64Bytes(block.GetStringBytes("blockSignature")))
		//line block.qtpl:19
		qw422016.N().S(`,
                "payloadHash":         `)
		//line block.qtpl:20
		qw422016.N().QZ(encoding.HexStringBytesToBase64Bytes(block.GetStringBytes("payloadHash")))
		//line block.qtpl:20
		qw422016.N().S(`,
                "generatorPublicKey":  `)
		//line block.qtpl:21
		qw422016.N().QZ(encoding.HexStringBytesToBase64Bytes(block.GetStringBytes("generatorPublicKey")))
		//line block.qtpl:21
		qw422016.N().S(`,
                "generationSignature": `)
		//line block.qtpl:22
		qw422016.N().QZ(encoding.HexStringBytesToBase64Bytes(block.GetStringBytes("generationSignature")))
		//line block.qtpl:22
		qw422016.N().S(`,
                "totalAmount":         `)
		//line block.qtpl:23
		qw422016.N().D(block.GetInt("totalAmountNQT"))
		//line block.qtpl:23
		qw422016.N().S(`,
                "payloadLength":       `)
		//line block.qtpl:24
		qw422016.N().D(block.GetInt("payloadLength"))
		//line block.qtpl:24
		qw422016.N().S(`,
                "previousBlockHash":   `)
		//line block.qtpl:25
		qw422016.N().QZ(encoding.HexStringBytesToBase64Bytes(block.GetStringBytes("previousBlockHash")))
		//line block.qtpl:25
		qw422016.N().S(`,
                "transactions": [
                    `)
		//line block.qtpl:28
		transactions := block.GetArray("transactions")

		//line block.qtpl:29
		qw422016.N().S(`
                    `)
		//line block.qtpl:30
		for txId, tx := range transactions {
			//line block.qtpl:30
			qw422016.N().S(`
                        `)
			//line block.qtpl:32
			surtype := tx.GetInt("type")
			subtype := tx.GetInt("subtype")
			attachment := tx.Get("attachment")

			//line block.qtpl:35
			qw422016.N().S(`
                        {
                            `)
			//line block.qtpl:37
			switch surtype {
			//line block.qtpl:38
			case 0:
				//line block.qtpl:38
				qw422016.N().S(`
                                `)
				//line block.qtpl:39
				switch subtype {
				//line block.qtpl:40
				case 0:
					//line block.qtpl:40
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.OrdinaryPayment",
                                `)
				//line block.qtpl:42
				case 1:
					//line block.qtpl:42
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.MultiOutCreation",
                                "attachment": {
                                    "recipients": [
                                        `)
					//line block.qtpl:47
					recipients := attachment.GetArray("recipients")

					//line block.qtpl:48
					qw422016.N().S(`
                                        `)
					//line block.qtpl:49
					for recipientId, recipient := range recipients {
						//line block.qtpl:49
						qw422016.N().S(`
                                            {
                                                "id":     `)
						//line block.qtpl:51
						qw422016.N().QZ(recipient.GetStringBytes("0"))
						//line block.qtpl:51
						qw422016.N().S(`,
                                                "amount": `)
						//line block.qtpl:52
						qw422016.N().QZ(recipient.GetStringBytes("1"))
						//line block.qtpl:52
						qw422016.N().S(`
                                            }`)
						//line block.qtpl:53
						if recipientId+1 < len(recipients) {
							//line block.qtpl:53
							qw422016.N().S(`,`)
							//line block.qtpl:53
						}
						//line block.qtpl:53
						qw422016.N().S(`
                                        `)
						//line block.qtpl:54
					}
					//line block.qtpl:54
					qw422016.N().S(`
                                    ]
                                },
                                `)
				//line block.qtpl:57
				case 2:
					//line block.qtpl:57
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.MultiSameOutCreation",
                                "attachment": {
                                    "recipients": [
                                        `)
					//line block.qtpl:62
					recipients := attachment.GetArray("recipients")

					//line block.qtpl:63
					qw422016.N().S(`
                                        `)
					//line block.qtpl:64
					for recipientId, recipient := range recipients {
						//line block.qtpl:64
						qw422016.N().S(`
                                        `)
						//line block.qtpl:65
						qw422016.N().QZ(recipient.GetStringBytes())
						//line block.qtpl:65
						if recipientId+1 < len(recipients) {
							//line block.qtpl:65
							qw422016.N().S(`,`)
							//line block.qtpl:65
						}
						//line block.qtpl:65
						qw422016.N().S(`
                                        `)
						//line block.qtpl:66
					}
					//line block.qtpl:66
					qw422016.N().S(`
                                    ]
                                },
                                `)
					//line block.qtpl:69
				}
				//line block.qtpl:69
				qw422016.N().S(`
                            `)
			//line block.qtpl:70
			case 1:
				//line block.qtpl:70
				qw422016.N().S(`
                                `)
				//line block.qtpl:71
				switch subtype {
				//line block.qtpl:72
				case 0:
					//line block.qtpl:72
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.ArbitaryMessage",
                                `)
				//line block.qtpl:74
				case 1:
					//line block.qtpl:74
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.AliasAssignment",
                                "attachment": {
                                    "alias": `)
					//line block.qtpl:77
					qw422016.N().QZ(attachment.GetStringBytes("alias"))
					//line block.qtpl:77
					qw422016.N().S(`,
                                    "uri": `)
					//line block.qtpl:78
					qw422016.N().QZ(attachment.GetStringBytes("uri"))
					//line block.qtpl:78
					qw422016.N().S(`
                                },
                                `)
				//line block.qtpl:80
				case 5:
					//line block.qtpl:80
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.AccountInfo",
                                "attachment": {
                                    "name": `)
					//line block.qtpl:83
					qw422016.N().QZ(attachment.GetStringBytes("name"))
					//line block.qtpl:83
					qw422016.N().S(`,
                                    "description": `)
					//line block.qtpl:84
					qw422016.N().QZ(attachment.GetStringBytes("description"))
					//line block.qtpl:84
					qw422016.N().S(`
                                },
                                `)
				//line block.qtpl:86
				case 6:
					//line block.qtpl:86
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.AliasSell",
                                "attachment": {
                                    "name": `)
					//line block.qtpl:89
					qw422016.N().QZ(attachment.GetStringBytes("alias"))
					//line block.qtpl:89
					qw422016.N().S(`,
                                    "price": `)
					//line block.qtpl:90
					qw422016.N().D(attachment.GetInt("priceNQT"))
					//line block.qtpl:90
					qw422016.N().S(`
                                },
                                `)
				//line block.qtpl:92
				case 7:
					//line block.qtpl:92
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.AliasBuy",
                                "attachment": {
                                    "name": `)
					//line block.qtpl:95
					qw422016.N().QZ(attachment.GetStringBytes("alias"))
					//line block.qtpl:95
					qw422016.N().S(`
                                },
                                `)
					//line block.qtpl:97
				}
				//line block.qtpl:97
				qw422016.N().S(`
                            `)
			//line block.qtpl:98
			case 2:
				//line block.qtpl:98
				qw422016.N().S(`
                                `)
				//line block.qtpl:99
				switch subtype {
				//line block.qtpl:100
				case 0:
					//line block.qtpl:100
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.AssetIssuance",
                                "attachment": {
                                    "name": `)
					//line block.qtpl:103
					qw422016.N().QZ(attachment.GetStringBytes("name"))
					//line block.qtpl:103
					qw422016.N().S(`,
                                    "description": `)
					//line block.qtpl:104
					qw422016.N().QZ(attachment.GetStringBytes("description"))
					//line block.qtpl:104
					qw422016.N().S(`,
                                    "quantity": `)
					//line block.qtpl:105
					qw422016.N().D(attachment.GetInt("quantityQNT"))
					//line block.qtpl:105
					qw422016.N().S(`,
                                    "decimals": `)
					//line block.qtpl:106
					qw422016.N().D(attachment.GetInt("decimals"))
					//line block.qtpl:106
					qw422016.N().S(`,
                                    "comment": `)
					//line block.qtpl:107
					qw422016.N().QZ(attachment.GetStringBytes("comment"))
					//line block.qtpl:107
					qw422016.N().S(`
                                },
                                `)
				//line block.qtpl:109
				case 1:
					//line block.qtpl:109
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.AssetTransfer",
                                "attachment": {
                                    "asset": `)
					//line block.qtpl:112
					qw422016.N().QZ(attachment.GetStringBytes("asset"))
					//line block.qtpl:112
					qw422016.N().S(`,
                                    "quantity": `)
					//line block.qtpl:113
					qw422016.N().D(attachment.GetInt("quantityQNT"))
					//line block.qtpl:113
					qw422016.N().S(`,
                                    "comment": `)
					//line block.qtpl:114
					qw422016.N().QZ(attachment.GetStringBytes("comment"))
					//line block.qtpl:114
					qw422016.N().S(`
                                },
                                `)
				//line block.qtpl:116
				case 2:
					//line block.qtpl:116
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.AskOrderPlacement",
                                "attachment": {
                                    "asset": `)
					//line block.qtpl:119
					qw422016.N().QZ(attachment.GetStringBytes("asset"))
					//line block.qtpl:119
					qw422016.N().S(`,
                                    "quantity": `)
					//line block.qtpl:120
					qw422016.N().D(attachment.GetInt("quantityQNT"))
					//line block.qtpl:120
					qw422016.N().S(`,
                                    "price": `)
					//line block.qtpl:121
					qw422016.N().D(attachment.GetInt("priceNQT"))
					//line block.qtpl:121
					qw422016.N().S(`,
                                    "comment": `)
					//line block.qtpl:122
					qw422016.N().QZ(attachment.GetStringBytes("comment"))
					//line block.qtpl:122
					qw422016.N().S(`
                                },
                                `)
				//line block.qtpl:124
				case 3:
					//line block.qtpl:124
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.BidOrderPlacement",
                                "attachment": {
                                    "asset": `)
					//line block.qtpl:127
					qw422016.N().QZ(attachment.GetStringBytes("asset"))
					//line block.qtpl:127
					qw422016.N().S(`,
                                    "quantity": "`)
					//line block.qtpl:128
					qw422016.N().D(attachment.GetInt("quantityQNT"))
					//line block.qtpl:128
					qw422016.N().S(`",
                                    "price": "`)
					//line block.qtpl:129
					qw422016.N().D(attachment.GetInt("priceNQT"))
					//line block.qtpl:129
					qw422016.N().S(`"
                                },
                                `)
				//line block.qtpl:131
				case 4:
					//line block.qtpl:131
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.AskOrderCancellation",
                                "attachment": {
                                    "order": `)
					//line block.qtpl:134
					qw422016.N().QZ(attachment.GetStringBytes("order"))
					//line block.qtpl:134
					qw422016.N().S(`
                                },
                                `)
				//line block.qtpl:136
				case 5:
					//line block.qtpl:136
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.BidOrderCancellation",
                                "attachment": {
                                    "order": `)
					//line block.qtpl:139
					qw422016.N().QZ(attachment.GetStringBytes("order"))
					//line block.qtpl:139
					qw422016.N().S(`
                                },
                                `)
					//line block.qtpl:141
				}
				//line block.qtpl:141
				qw422016.N().S(`
                            `)
			//line block.qtpl:142
			case 3:
				//line block.qtpl:142
				qw422016.N().S(`
                                `)
				//line block.qtpl:143
				switch subtype {
				//line block.qtpl:144
				case 0:
					//line block.qtpl:144
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.DigitalGoodsListing",
                                "attachment": {
                                    "name": `)
					//line block.qtpl:147
					qw422016.N().QZ(attachment.GetStringBytes("name"))
					//line block.qtpl:147
					qw422016.N().S(`,
                                    "description": `)
					//line block.qtpl:148
					qw422016.N().QZ(attachment.GetStringBytes("description"))
					//line block.qtpl:148
					qw422016.N().S(`,
                                    "tags": `)
					//line block.qtpl:149
					qw422016.N().QZ(attachment.GetStringBytes("tags"))
					//line block.qtpl:149
					qw422016.N().S(`,
                                    "quantity": `)
					//line block.qtpl:150
					qw422016.N().D(attachment.GetInt("quantityQNT"))
					//line block.qtpl:150
					qw422016.N().S(`,
                                    "price": "`)
					//line block.qtpl:151
					qw422016.N().D(attachment.GetInt("priceNQT"))
					//line block.qtpl:151
					qw422016.N().S(`"
                                },
                                `)
				//line block.qtpl:153
				case 1:
					//line block.qtpl:153
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.DigitalGoodsDelisting",
                                "attachment": {
                                    "id": `)
					//line block.qtpl:156
					qw422016.N().QZ(attachment.GetStringBytes("goods"))
					//line block.qtpl:156
					qw422016.N().S(`
                                },
                                `)
				//line block.qtpl:158
				case 2:
					//line block.qtpl:158
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.DigitalGoodsPriceChange",
                                "attachment": {
                                    "id": `)
					//line block.qtpl:161
					qw422016.N().QZ(attachment.GetStringBytes("goods"))
					//line block.qtpl:161
					qw422016.N().S(`,
                                    "price": "`)
					//line block.qtpl:162
					qw422016.N().D(attachment.GetInt("priceNQT"))
					//line block.qtpl:162
					qw422016.N().S(`"
                                },
                                `)
				//line block.qtpl:164
				case 3:
					//line block.qtpl:164
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.DigitalGoodsQuantityChange",
                                "attachment": {
                                    "id": `)
					//line block.qtpl:167
					qw422016.N().QZ(attachment.GetStringBytes("goods"))
					//line block.qtpl:167
					qw422016.N().S(`,
                                    "delta": `)
					//line block.qtpl:168
					qw422016.N().D(attachment.GetInt("deltaQuantityQNT"))
					//line block.qtpl:168
					qw422016.N().S(`
                                },
                                `)
				//line block.qtpl:170
				case 4:
					//line block.qtpl:170
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.DigitalGoodsPurchase",
                                "attachment": {
                                    "id": `)
					//line block.qtpl:173
					qw422016.N().QZ(attachment.GetStringBytes("goods"))
					//line block.qtpl:173
					qw422016.N().S(`,
                                    "quantity": `)
					//line block.qtpl:174
					qw422016.N().D(attachment.GetInt("quantityQNT"))
					//line block.qtpl:174
					qw422016.N().S(`,
                                    "price": "`)
					//line block.qtpl:175
					qw422016.N().D(attachment.GetInt("priceNQT"))
					//line block.qtpl:175
					qw422016.N().S(`",
                                    "deliveryDeadlineTimestamp": `)
					//line block.qtpl:176
					qw422016.N().D(attachment.GetInt("deliveryDeadlineTimestamp"))
					//line block.qtpl:176
					qw422016.N().S(`
                                },
                                `)
				//line block.qtpl:178
				case 5:
					//line block.qtpl:178
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.DigitalGoodsDelivery",
                                "attachment": {
                                    "purchase": `)
					//line block.qtpl:181
					qw422016.N().QZ(attachment.GetStringBytes("purchase"))
					//line block.qtpl:181
					qw422016.N().S(`,
                                    "isText": `)
					//line block.qtpl:182
					if attachment.GetBool("goodsIsText") {
						//line block.qtpl:182
						qw422016.N().S(`true`)
						//line block.qtpl:182
					} else {
						//line block.qtpl:182
						qw422016.N().S(`false`)
						//line block.qtpl:182
					}
					//line block.qtpl:182
					qw422016.N().S(`,
                                    "data": `)
					//line block.qtpl:183
					qw422016.N().QZ(attachment.GetStringBytes("goodsData"))
					//line block.qtpl:183
					qw422016.N().S(`,
                                    "nonce": `)
					//line block.qtpl:184
					qw422016.N().QZ(attachment.GetStringBytes("goodsNonce"))
					//line block.qtpl:184
					qw422016.N().S(`,
                                    "discount": "`)
					//line block.qtpl:185
					qw422016.N().D(attachment.GetInt("discountNQT"))
					//line block.qtpl:185
					qw422016.N().S(`"
                                },
                                `)
				//line block.qtpl:187
				case 6:
					//line block.qtpl:187
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.DigitalGoodsFeedback",
                                "attachment": {
                                    "purchase": `)
					//line block.qtpl:190
					qw422016.N().QZ(attachment.GetStringBytes("purchase"))
					//line block.qtpl:190
					qw422016.N().S(`
                                },
                                `)
				//line block.qtpl:192
				case 7:
					//line block.qtpl:192
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.DigitalGoodsRefund",
                                "attachment": {
                                    "purchase": `)
					//line block.qtpl:195
					qw422016.N().QZ(attachment.GetStringBytes("purchase"))
					//line block.qtpl:195
					qw422016.N().S(`,
                                    "refund": "`)
					//line block.qtpl:196
					qw422016.N().D(attachment.GetInt("refundNQT"))
					//line block.qtpl:196
					qw422016.N().S(`"
                                },
                                `)
					//line block.qtpl:198
				}
				//line block.qtpl:198
				qw422016.N().S(`
                            `)
			//line block.qtpl:199
			case 4:
				//line block.qtpl:199
				qw422016.N().S(`
                                `)
				//line block.qtpl:200
				switch subtype {
				//line block.qtpl:201
				case 0:
					//line block.qtpl:201
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.EffectiveBalanceLeasing",
                                "attachment": {
                                    "period": `)
					//line block.qtpl:204
					qw422016.N().D(attachment.GetInt("period"))
					//line block.qtpl:204
					qw422016.N().S(`
                                },
                                `)
					//line block.qtpl:206
				}
				//line block.qtpl:206
				qw422016.N().S(`
                            `)
			//line block.qtpl:207
			case 20:
				//line block.qtpl:207
				qw422016.N().S(`
                                `)
				//line block.qtpl:208
				switch subtype {
				//line block.qtpl:209
				case 0:
					//line block.qtpl:209
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.RewardRecipientAssignment",
                                `)
					//line block.qtpl:211
				}
				//line block.qtpl:211
				qw422016.N().S(`
                            `)
			//line block.qtpl:212
			case 21:
				//line block.qtpl:212
				qw422016.N().S(`
                                `)
				//line block.qtpl:213
				switch subtype {
				//line block.qtpl:214
				case 0:
					//line block.qtpl:214
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.EscrowCreation",
                                "attachment": {
                                    "amount": `)
					//line block.qtpl:217
					qw422016.N().QZ(attachment.GetStringBytes("amountNQT"))
					//line block.qtpl:217
					qw422016.N().S(`,
                                    "deadline": `)
					//line block.qtpl:218
					qw422016.N().D(attachment.GetInt("deadline"))
					//line block.qtpl:218
					qw422016.N().S(`,
                                    "deadlineAction": `)
					//line block.qtpl:219
					qw422016.N().QZ(attachment.GetStringBytes("deadlineAction"))
					//line block.qtpl:219
					qw422016.N().S(`,
                                    "requiredSigners": `)
					//line block.qtpl:220
					qw422016.N().D(attachment.GetInt("requiredSigners"))
					//line block.qtpl:220
					qw422016.N().S(`,
                                    "signers": [
                                        `)
					//line block.qtpl:223
					signers := attachment.GetArray("signers")

					//line block.qtpl:224
					qw422016.N().S(`
                                        `)
					//line block.qtpl:225
					for signerId, signer := range signers {
						//line block.qtpl:225
						qw422016.N().S(`
                                        `)
						//line block.qtpl:226
						qw422016.N().QZ(signer.GetStringBytes())
						//line block.qtpl:226
						if signerId+1 < len(signers) {
							//line block.qtpl:226
							qw422016.N().S(`,`)
							//line block.qtpl:226
						}
						//line block.qtpl:226
						qw422016.N().S(`
                                        `)
						//line block.qtpl:227
					}
					//line block.qtpl:227
					qw422016.N().S(`
                                    ]
                                },
                                `)
				//line block.qtpl:230
				case 1:
					//line block.qtpl:230
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.EscrowSign",
                                "attachment": {
                                    "id": `)
					//line block.qtpl:233
					qw422016.N().QZ(attachment.GetStringBytes("escrowID"))
					//line block.qtpl:233
					qw422016.N().S(`,
                                    "decision": `)
					//line block.qtpl:234
					qw422016.N().D(attachment.GetInt("decision"))
					//line block.qtpl:234
					qw422016.N().S(`
                                },
                                `)
				//line block.qtpl:236
				case 2:
					//line block.qtpl:236
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.EscrowResult",
                                "attachment": {
                                    "id": `)
					//line block.qtpl:239
					qw422016.N().QZ(attachment.GetStringBytes("escrowID"))
					//line block.qtpl:239
					qw422016.N().S(`,
                                    "decision": `)
					//line block.qtpl:240
					qw422016.N().D(attachment.GetInt("decision"))
					//line block.qtpl:240
					qw422016.N().S(`
                                },
                                `)
				//line block.qtpl:242
				case 3:
					//line block.qtpl:242
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.SubscriptionSubscribe",
                                "attachment": {
                                    "frequency": `)
					//line block.qtpl:245
					qw422016.N().D(attachment.GetInt("frequency"))
					//line block.qtpl:245
					qw422016.N().S(`
                                },
                                `)
				//line block.qtpl:247
				case 4:
					//line block.qtpl:247
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.SubscriptionCancel",
                                "attachment": {
                                    "id": `)
					//line block.qtpl:250
					qw422016.N().QZ(attachment.GetStringBytes("subscriptionId"))
					//line block.qtpl:250
					qw422016.N().S(`
                                },
                                `)
				//line block.qtpl:252
				case 5:
					//line block.qtpl:252
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.SubscriptionPayment",
                                "attachment": {
                                    "ids": [
                                        `)
					//line block.qtpl:257
					subscribers := attachment.GetArray("subscriptionIDs")

					//line block.qtpl:258
					qw422016.N().S(`
                                        `)
					//line block.qtpl:259
					for subscriberId, subscriber := range subscribers {
						//line block.qtpl:259
						qw422016.N().S(`
                                        `)
						//line block.qtpl:260
						qw422016.N().QZ(subscriber.GetStringBytes())
						//line block.qtpl:260
						if subscriberId+1 < len(subscribers) {
							//line block.qtpl:260
							qw422016.N().S(`,`)
							//line block.qtpl:260
						}
						//line block.qtpl:260
						qw422016.N().S(`
                                        `)
						//line block.qtpl:261
					}
					//line block.qtpl:261
					qw422016.N().S(`
                                    ]
                                }
                                `)
					//line block.qtpl:264
				}
				//line block.qtpl:264
				qw422016.N().S(`
                            `)
			//line block.qtpl:265
			case 22:
				//line block.qtpl:265
				qw422016.N().S(`
                                `)
				//line block.qtpl:266
				switch subtype {
				//line block.qtpl:267
				case 0:
					//line block.qtpl:267
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.AutomatedTransactionsCreation",
                                "attachment": {
                                    "name": `)
					//line block.qtpl:270
					qw422016.N().QZ(attachment.GetStringBytes("name"))
					//line block.qtpl:270
					qw422016.N().S(`,
                                    "description": `)
					//line block.qtpl:271
					qw422016.N().QZ(attachment.GetStringBytes("description"))
					//line block.qtpl:271
					qw422016.N().S(`,
                                    "bytes": `)
					//line block.qtpl:272
					qw422016.N().QZ([]byte(base64.StdEncoding.EncodeToString(attachment.GetStringBytes("creationBytes"))))
					//line block.qtpl:272
					qw422016.N().S(`
                                },
                                `)
				//line block.qtpl:274
				case 1:
					//line block.qtpl:274
					qw422016.N().S(`
                                "@type":"type.googleapis.com/p2p.AutomatedTransactionsPayment",
                                `)
					//line block.qtpl:276
				}
				//line block.qtpl:276
				qw422016.N().S(`
                            `)
				//line block.qtpl:277
			}
			//line block.qtpl:277
			qw422016.N().S(`
                            "header": {
                                "version":         `)
			//line block.qtpl:279
			qw422016.N().D(tx.GetInt("version"))
			//line block.qtpl:279
			qw422016.N().S(`,
                                "timestamp":       `)
			//line block.qtpl:280
			qw422016.N().D(tx.GetInt("timestamp"))
			//line block.qtpl:280
			qw422016.N().S(`,
                                "amount":          `)
			//line block.qtpl:281
			qw422016.N().D(tx.GetInt("amountNQT"))
			//line block.qtpl:281
			qw422016.N().S(`,
                                "fee":             `)
			//line block.qtpl:282
			qw422016.N().D(tx.GetInt("feeNQT"))
			//line block.qtpl:282
			qw422016.N().S(`,
                                `)
			//line block.qtpl:283
			if tx.Exists("recipient") {
				//line block.qtpl:283
				qw422016.N().S(`
                                "recipient":       `)
				//line block.qtpl:284
				qw422016.N().QZ(tx.GetStringBytes("recipient"))
				//line block.qtpl:284
				qw422016.N().S(`,
                                `)
				//line block.qtpl:285
			}
			//line block.qtpl:285
			qw422016.N().S(`
                                "senderPublicKey": `)
			//line block.qtpl:286
			qw422016.N().QZ(tx.GetStringBytes("senderPublicKey"))
			//line block.qtpl:286
			qw422016.N().S(`,
                                "deadline":        `)
			//line block.qtpl:287
			qw422016.N().D(tx.GetInt("deadline"))
			//line block.qtpl:287
			qw422016.N().S(`,
                                "ecBlockId":       `)
			//line block.qtpl:288
			qw422016.N().QZ(tx.GetStringBytes("ecBlockId"))
			//line block.qtpl:288
			qw422016.N().S(`,
                                "ecBlockHeight":   `)
			//line block.qtpl:289
			qw422016.N().D(tx.GetInt("ecBlockHeight"))
			//line block.qtpl:289
			qw422016.N().S(`,
                                "signature":       `)
			//line block.qtpl:290
			qw422016.N().QZ(tx.GetStringBytes("signature"))
			//line block.qtpl:290
			qw422016.N().S(`
                            }
                            `)
			//line block.qtpl:293
			hasMessage := attachment.Exists("version.Message")
			hasEncryptedMessage := attachment.Exists("version.EncryptedMessage")
			hasPublicKeyAnnouncement := attachment.Exists("version.PublicKeyAnnouncement")
			hasEncryptToSelfMessage := attachment.Exists("version.EncryptToSelfMessage")

			//line block.qtpl:297
			qw422016.N().S(`
                            `)
			//line block.qtpl:298
			if hasMessage || hasEncryptedMessage || hasPublicKeyAnnouncement || hasEncryptToSelfMessage {
				//line block.qtpl:298
				qw422016.N().S(`
                            ,
                            "appendix": {
                                `)
				//line block.qtpl:301
				if hasMessage {
					//line block.qtpl:301
					qw422016.N().S(`
                                "message": {
                                    "isText":  `)
					//line block.qtpl:303
					if attachment.GetBool("messageIsText") {
						//line block.qtpl:303
						qw422016.N().S(`true`)
						//line block.qtpl:303
					} else {
						//line block.qtpl:303
						qw422016.N().S(`false`)
						//line block.qtpl:303
					}
					//line block.qtpl:303
					qw422016.N().S(`,
                                    "content": `)
					//line block.qtpl:304
					qw422016.N().QZ(attachment.GetStringBytes("message"))
					//line block.qtpl:304
					qw422016.N().S(`
                                }`)
					//line block.qtpl:305
					if hasEncryptedMessage || hasPublicKeyAnnouncement || hasEncryptToSelfMessage {
						//line block.qtpl:305
						qw422016.N().S(`,`)
						//line block.qtpl:305
					}
					//line block.qtpl:305
					qw422016.N().S(`
                                `)
					//line block.qtpl:306
				}
				//line block.qtpl:306
				qw422016.N().S(`
                                `)
				//line block.qtpl:307
				if hasEncryptedMessage {
					//line block.qtpl:307
					qw422016.N().S(`
                                "encryptedMessage": {
                                    "data":   `)
					//line block.qtpl:309
					qw422016.N().QZ(attachment.GetStringBytes("encryptedMessage", "data"))
					//line block.qtpl:309
					qw422016.N().S(`,
                                    "isText": `)
					//line block.qtpl:310
					if attachment.GetBool("encryptedMessage", "isText") {
						//line block.qtpl:310
						qw422016.N().S(`true`)
						//line block.qtpl:310
					} else {
						//line block.qtpl:310
						qw422016.N().S(`false`)
						//line block.qtpl:310
					}
					//line block.qtpl:310
					qw422016.N().S(`,
                                    "nonce":  `)
					//line block.qtpl:311
					qw422016.N().QZ(attachment.GetStringBytes("encryptedMessage", "nonce"))
					//line block.qtpl:311
					qw422016.N().S(`
                                }`)
					//line block.qtpl:312
					if hasPublicKeyAnnouncement || hasEncryptToSelfMessage {
						//line block.qtpl:312
						qw422016.N().S(`,`)
						//line block.qtpl:312
					}
					//line block.qtpl:312
					qw422016.N().S(`
                                `)
					//line block.qtpl:313
				}
				//line block.qtpl:313
				qw422016.N().S(`
                                `)
				//line block.qtpl:314
				if hasPublicKeyAnnouncement {
					//line block.qtpl:314
					qw422016.N().S(`
                                "publicKeyAnnouncement": {
                                    "publicKey": `)
					//line block.qtpl:316
					qw422016.N().QZ(attachment.GetStringBytes("recipientPublicKey"))
					//line block.qtpl:316
					qw422016.N().S(`
                                }`)
					//line block.qtpl:317
					if hasEncryptToSelfMessage {
						//line block.qtpl:317
						qw422016.N().S(`,`)
						//line block.qtpl:317
					}
					//line block.qtpl:317
					qw422016.N().S(`
                                `)
					//line block.qtpl:318
				}
				//line block.qtpl:318
				qw422016.N().S(`
                                `)
				//line block.qtpl:319
				if hasEncryptToSelfMessage {
					//line block.qtpl:319
					qw422016.N().S(`    
                                "encryptToSelfMessage": {
                                    "data":   `)
					//line block.qtpl:321
					qw422016.N().QZ(attachment.GetStringBytes("encryptToSelfMessage", "data"))
					//line block.qtpl:321
					qw422016.N().S(`,
                                    "isText": `)
					//line block.qtpl:322
					if attachment.GetBool("encryptToSelfMessage", "isText") {
						//line block.qtpl:322
						qw422016.N().S(`true`)
						//line block.qtpl:322
					} else {
						//line block.qtpl:322
						qw422016.N().S(`false`)
						//line block.qtpl:322
					}
					//line block.qtpl:322
					qw422016.N().S(`,
                                    "nonce":  `)
					//line block.qtpl:323
					qw422016.N().QZ(attachment.GetStringBytes("encryptToSelfMessage", "nonce"))
					//line block.qtpl:323
					qw422016.N().S(`
                                }
                                `)
					//line block.qtpl:325
				}
				//line block.qtpl:325
				qw422016.N().S(`
                            }
                            `)
				//line block.qtpl:327
			}
			//line block.qtpl:327
			qw422016.N().S(`
                        }`)
			//line block.qtpl:328
			if txId+1 < len(transactions) {
				//line block.qtpl:328
				qw422016.N().S(`,`)
				//line block.qtpl:328
			}
			//line block.qtpl:328
			qw422016.N().S(`
                    `)
			//line block.qtpl:329
		}
		//line block.qtpl:329
		qw422016.N().S(`
                ]
            }`)
		//line block.qtpl:331
		if blockId+1 < len(blocks) {
			//line block.qtpl:331
			qw422016.N().S(`,`)
			//line block.qtpl:331
		}
		//line block.qtpl:331
		qw422016.N().S(`
        `)
		//line block.qtpl:332
	}
	//line block.qtpl:332
	qw422016.N().S(`
    ]
}
`)
//line block.qtpl:335
}

//line block.qtpl:335
func WriteUpgrade(qq422016 qtio422016.Writer, src *fastjson.Value) {
	//line block.qtpl:335
	qw422016 := qt422016.AcquireWriter(qq422016)
	//line block.qtpl:335
	StreamUpgrade(qw422016, src)
	//line block.qtpl:335
	qt422016.ReleaseWriter(qw422016)
//line block.qtpl:335
}

//line block.qtpl:335
func Upgrade(src *fastjson.Value) string {
	//line block.qtpl:335
	qb422016 := qt422016.AcquireByteBuffer()
	//line block.qtpl:335
	WriteUpgrade(qb422016, src)
	//line block.qtpl:335
	qs422016 := string(qb422016.B)
	//line block.qtpl:335
	qt422016.ReleaseByteBuffer(qb422016)
	//line block.qtpl:335
	return qs422016
//line block.qtpl:335
}

//line block.qtpl:336
func StreamDowngrade(qw422016 *qt422016.Writer, pb *api.GetNextBlocksResponse) {
	//line block.qtpl:336
	qw422016.N().S(`
{
    "nextBlocks": [
        `)
	//line block.qtpl:340
	blocks := pb.NextBlocks

	//line block.qtpl:341
	qw422016.N().S(`
        `)
	//line block.qtpl:342
	for blockId, block := range blocks {
		//line block.qtpl:342
		qw422016.N().S(`
        {
            "timestamp":           `)
		//line block.qtpl:344
		qw422016.E().V(block.Timestamp)
		//line block.qtpl:344
		qw422016.N().S(`,
            "previousBlock":       `)
		//line block.qtpl:345
		qw422016.E().V(block.PreviousBlock)
		//line block.qtpl:345
		qw422016.N().S(`,
            "blockATs":            `)
		//line block.qtpl:346
		qw422016.N().QZ(block.BlockATs)
		//line block.qtpl:346
		qw422016.N().S(`,
            "totalFeeNQT":         `)
		//line block.qtpl:347
		qw422016.E().V(block.TotalFee)
		//line block.qtpl:347
		qw422016.N().S(`,
            "nonce":               `)
		//line block.qtpl:348
		qw422016.E().V(block.Nonce)
		//line block.qtpl:348
		qw422016.N().S(`,
            "version":             `)
		//line block.qtpl:349
		qw422016.E().V(block.Version)
		//line block.qtpl:349
		qw422016.N().S(`,
            "blockSignature":      `)
		//line block.qtpl:350
		qw422016.N().QZ(encoding.BytesToHexStringBytes(block.BlockSignature))
		//line block.qtpl:350
		qw422016.N().S(`,
            "payloadHash":         `)
		//line block.qtpl:351
		qw422016.N().QZ(encoding.BytesToHexStringBytes(block.PayloadHash))
		//line block.qtpl:351
		qw422016.N().S(`,
            "generatorPublicKey":  `)
		//line block.qtpl:352
		qw422016.N().QZ(encoding.BytesToHexStringBytes(block.GeneratorPublicKey))
		//line block.qtpl:352
		qw422016.N().S(`,
            "generationSignature": `)
		//line block.qtpl:353
		qw422016.N().QZ(encoding.BytesToHexStringBytes(block.GenerationSignature))
		//line block.qtpl:353
		qw422016.N().S(`,
            "totalAmountNQT":      `)
		//line block.qtpl:354
		qw422016.E().V(block.TotalAmount)
		//line block.qtpl:354
		qw422016.N().S(`,
            "payloadLength":       `)
		//line block.qtpl:355
		qw422016.E().V(block.PayloadLength)
		//line block.qtpl:355
		qw422016.N().S(`,
            "previousBlockHash":   `)
		//line block.qtpl:356
		qw422016.N().QZ(encoding.BytesToHexStringBytes(block.PreviousBlockHash))
		//line block.qtpl:356
		qw422016.N().S(`,
            "transactions": [

            ]
            
        }`)
		//line block.qtpl:361
		if blockId+1 < len(blocks) {
			//line block.qtpl:361
			qw422016.N().S(`,`)
			//line block.qtpl:361
		}
		//line block.qtpl:361
		qw422016.N().S(`
        `)
		//line block.qtpl:362
	}
	//line block.qtpl:362
	qw422016.N().S(`
    ]
}
`)
//line block.qtpl:365
}

//line block.qtpl:365
func WriteDowngrade(qq422016 qtio422016.Writer, pb *api.GetNextBlocksResponse) {
	//line block.qtpl:365
	qw422016 := qt422016.AcquireWriter(qq422016)
	//line block.qtpl:365
	StreamDowngrade(qw422016, pb)
	//line block.qtpl:365
	qt422016.ReleaseWriter(qw422016)
//line block.qtpl:365
}

//line block.qtpl:365
func Downgrade(pb *api.GetNextBlocksResponse) string {
	//line block.qtpl:365
	qb422016 := qt422016.AcquireByteBuffer()
	//line block.qtpl:365
	WriteDowngrade(qb422016, pb)
	//line block.qtpl:365
	qs422016 := string(qb422016.B)
	//line block.qtpl:365
	qt422016.ReleaseByteBuffer(qb422016)
	//line block.qtpl:365
	return qs422016
//line block.qtpl:365
}
